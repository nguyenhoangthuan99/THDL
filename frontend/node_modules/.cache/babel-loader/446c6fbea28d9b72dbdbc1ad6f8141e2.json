{"ast":null,"code":"import _toConsumableArray from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/alex.nguyen/Desktop/git/THDL/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import\"./index.css\";import Image from\"../../Base/Image.jsx\";import{events}from\"../../dummydb/dbEvents\";import api from\"../../Base/fetchData\";import ViewMore from\"../Common/ViewMore\";import{ReactSpinner}from'react-spinning-wheel';import'react-spinning-wheel/dist/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Element=/*#__PURE__*/function(_React$Component){_inherits(Element,_React$Component);var _super=_createSuper(Element);function Element(props){var _this;_classCallCheck(this,Element);_this=_super.call(this,props);_this.componentDidUpdate=function(prevProps,prevState,snapshot){if(_this.props.body!=prevProps.body){_this.state.body=_this.props.body;}if(_this.props.task!=prevProps.task){console.log(\"start update\");var task_id=_this.props.task[_this.props.web];//var task_id = this.props.task[this.props.web];\nconsole.log(\"task id \",_this.props.task,task_id,_this.props.web);_this.Search(task_id);}};_this.state={title:_this.props.title,task:_this.props.task,web:_this.props.web,list:[],activeIndex:null,page:1,loading:false,body:{}};return _this;}_createClass(Element,[{key:\"seeMore\",value:function seeMore(){this.setState({page:this.state.page+1});this.SearchMore();}},{key:\"Search\",value:function(){var _Search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(task_id){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!task_id){_context.next=7;break;}this.setState({loading:true});_context.next=4;return api.getResult(task_id);case 4:result=_context.sent;//console.log(result)\nthis.setState({list:result.data});this.setState({loading:false});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function Search(_x){return _Search.apply(this,arguments);}return Search;}()},{key:\"SearchMore\",value:function(){var _SearchMore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var body,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({loading:true});body={\"type\":this.props.body.type,\"subject\":this.props.body.subject,\"grade\":this.props.body.grade,\"level\":this.props.body.level,\"text\":this.props.body.text,\"page\":this.state.page};console.log(\"body\",body,this.state.body);_context2.next=5;return api.searchOneWeb(body,this.state.web);case 5:result=_context2.sent;this.setState({list:[].concat(_toConsumableArray(this.state.list),_toConsumableArray(result.data))});this.setState({loading:false});case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function SearchMore(){return _SearchMore.apply(this,arguments);}return SearchMore;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-items\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:this.state.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"eventsItems\",children:this.state.loading?/*#__PURE__*/_jsx(ReactSpinner,{}):/*#__PURE__*/_jsx(\"div\",{children:this.state.list.map(function(item,index){return/*#__PURE__*/_jsx(\"a\",{href:item.link,target:\"_blank\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"eventsItem\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"eventsDate\",children:/*#__PURE__*/_jsx(\"img\",{src:Image.vsdx})}),/*#__PURE__*/_jsxs(\"div\",{className:\"eventsContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"eventsItemTitle\",children:[\" \",item.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"eventsItemTime\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"eventsIcon\",src:Image.clock}),/*#__PURE__*/_jsx(\"div\",{className:\"eventsItemStartEnd\",children:item.date})]})]})]},index)},index);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"view-more\",children:/*#__PURE__*/_jsx(ViewMore,{className:\"viewmore\",onClick:this.seeMore.bind(this)})})]});}}]);return Element;}(React.Component);export{Element as default};","map":{"version":3,"names":["React","Image","events","api","ViewMore","ReactSpinner","Element","props","componentDidUpdate","prevProps","prevState","snapshot","body","state","task","console","log","task_id","web","Search","title","list","activeIndex","page","loading","setState","SearchMore","getResult","result","data","type","subject","grade","level","text","searchOneWeb","map","item","index","link","vsdx","clock","date","seeMore","bind","Component"],"sources":["C:/Users/alex.nguyen/Desktop/git/THDL/frontend/src/Components/Events/Element.jsx"],"sourcesContent":["import React from \"react\";\r\nimport \"./index.css\";\r\nimport Image from \"../../Base/Image.jsx\"\r\nimport {events} from \"../../dummydb/dbEvents\"\r\nimport api from \"../../Base/fetchData\"\r\nimport ViewMore from \"../Common/ViewMore\";\r\nimport {ReactSpinner} from 'react-spinning-wheel';\r\nimport 'react-spinning-wheel/dist/style.css';\r\nexport default class Element extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            title:this.props.title,\r\n            task:this.props.task,\r\n            web:this.props.web,\r\n            list: [],\r\n            activeIndex:null,\r\n            page:1,\r\n            loading:false,\r\n            body:{},\r\n            \r\n        }\r\n        \r\n    };\r\n    // componentDidMount=()=>{\r\n        \r\n        \r\n    // }\r\n    componentDidUpdate=(prevProps, prevState, snapshot)=>{\r\n        if(this.props.body != prevProps.body){\r\n            this.state.body = this.props.body;\r\n        }\r\n        if(this.props.task != prevProps.task){\r\n            console.log(\"start update\")\r\n            var task_id = this.props.task[this.props.web]\r\n            //var task_id = this.props.task[this.props.web];\r\n            console.log(\"task id \",this.props.task,task_id,this.props.web)\r\n            this.Search(task_id);\r\n        }\r\n        \r\n    }\r\n    seeMore(){\r\n        this.setState({page:this.state.page+1});\r\n        this.SearchMore();\r\n    };\r\n    async Search(task_id){\r\n       if(task_id){\r\n        this.setState({loading:true})\r\n        var result= await api.getResult(task_id);\r\n        //console.log(result)\r\n        this.setState({list:result.data})\r\n        this.setState({loading:false})\r\n       }\r\n        \r\n        \r\n    }\r\n    async SearchMore(){\r\n        this.setState({loading:true})\r\n        var body = {\r\n            \"type\": this.props.body.type,\r\n            \"subject\": this.props.body.subject,\r\n            \"grade\": this.props.body.grade,\r\n            \"level\": this.props.body.level,\r\n            \"text\": this.props.body.text,\r\n            \"page\": this.state.page\r\n        }\r\n        console.log(\"body\",body,this.state.body)\r\n        var result= await api.searchOneWeb(body,this.state.web);\r\n        this.setState({list:[...this.state.list,...result.data]})\r\n        this.setState({loading:false})\r\n    }\r\n    render(){\r\n\r\n        return(\r\n            <div className=\"wrapper-items\">\r\n                <div><h2>{this.state.title}</h2></div>\r\n                <div className=\"eventsItems\">\r\n                    {\r\n                        this.state.loading?(<ReactSpinner />):(<div>\r\n                    {\r\n                        this.state.list.map((item,index) => (   \r\n                                \r\n                            <a href={item.link} target=\"_blank\" key={index}>\r\n                                <div key={index} className=\"eventsItem\">\r\n                                    <div className=\"eventsDate\">\r\n                                    <img src={Image.vsdx}></img>\r\n                                    </div>\r\n                                    <div className=\"eventsContent\">\r\n                                    <div className=\"eventsItemTitle\"> {item.title}</div>\r\n                                    <div className=\"eventsItemTime\">\r\n                                        <img className=\"eventsIcon\" src={Image.clock}/>\r\n                                        <div className=\"eventsItemStartEnd\">{item.date}</div>\r\n                                    </div>\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                    ))\r\n                    }\r\n                    </div>)}\r\n                    \r\n                </div>\r\n                <div className=\"view-more\">{\r\n                        <ViewMore  className=\"viewmore\"  onClick={this.seeMore.bind(this)}/> }\r\n                    </div>\r\n            </div>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}